$(document).ready((function(){$(".content_toggle").click((function(){return $(".content_block").slideToggle(300,(function(){$(this).is(":hidden")?$(".content_toggle").html("Читать далее"):$(".content_toggle").html("Скрыть")})),!1}))})),$(document).ready((function(){$(".content_toggle2").click((function(){return $(".content_block2").slideToggle(300,(function(){$(this).is(":hidden")?$(".content_toggle2").html("Читать далее"):$(".content_toggle2").html("Скрыть")})),!1}))})),$(document).ready((function(){$(".content_toggle3").click((function(){return $(".content_block3").slideToggle(300,(function(){$(this).is(":hidden")?$(".content_toggle3").html("Читать далее"):$(".content_toggle3").html("Скрыть")})),!1}))}));let tab=function(){let e,t=document.querySelectorAll(".tabs-nav__item"),s=document.querySelectorAll(".tab");function a(){t.forEach(e=>{e.classList.remove("is-active")}),this.classList.add("is-active"),e=this.getAttribute("data-tab-name"),function(e){s.forEach(t=>{t.classList.contains(e)?t.classList.add("is-active"):t.classList.remove("is-active")})}(e)}t.forEach(e=>{e.addEventListener("click",a)})};tab(),function(){var e=$(".section-build"),t=e.find(".c-section-build__scheme__dots"),s=e.find(".block__item");function a(e){t.find("li").eq(e).addClass("is-active").siblings().removeClass("is-active"),s.children().eq(e).addClass("is-active").siblings().removeClass("is-active"),$("#с-build__active-text").find("p").eq(e).addClass("is-active").siblings().removeClass("is-active"),console.log(s.find(".block__item").next().addClass("is-active").siblings().removeClass("is-active"))}t.find("li").on("click",(function(){a($(this).index())})),s.on("click",(function(){a($(this).index())}))}(),$(document).ready((function(){$(".block__title").click((function(e){$(".block").hasClass("one")&&($(".block__title").not($(this)).removeClass("active"),$(".block__text").not($(this).next()).slideUp(300)),$(this).toggleClass("active").next().slideToggle(300)}))}));class Mask{constructor(e,t={}){if(e){var s=this;this.symbol=t.symbol||"_",this.mask=t.mask||"+7 (___) ___-__-__",this.allowedChars=t.allowedChars||"[0-9]",this.empty=t.empty||"false",this.legalLength=t.legalLength,this.element=e,e.value=this.value=this.mask,this.regex=`${this.allowedChars}|${this.symbol}`,this.maskSymbols=this.mask.match(new RegExp(this.regex,"gi")),this.allowedCharsLength=0,this.maskSymbols.forEach(e=>{e==this.symbol&&this.allowedCharsLength++}),this.phonePrefix=!1,this.checkKeyCodeSupport(),e.addEventListener("focus",(function(){requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e=s.element.value.indexOf(s.symbol);s.caretPosition=-1!=e?e:s.element.value.length,s.setCaretPosition(s.element,s.caretPosition,s.caretPosition)})})})),e.addEventListener("blur",(function(){s.element.value||(s.element.value=s.mask)})),e.addEventListener("paste",e=>{"mask"==this.method&&this.pasteWithMask(e),"simpleMask"==this.method&&this.pasteWithSimpleMask(e)}),this.__bindedRoute=this.route.bind(this),e.addEventListener("load",this.__bindedRoute),e.addEventListener("keydown",this.__bindedRoute)}}route(e){0===e.keyCode||229===e.keyCode?this.__simpleMask(e):this.__mask(e)}__simpleMask(e){new Promise((e,t)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.value&&this.value.length>=this.element.value.length&&(t(),this.value=this.element.value),e(this.element.value)})})}).then(e=>e.match(new RegExp(this.allowedChars,"ig"))).then(e=>{var t=this.mask.split(""),s=this.mask.match(new RegExp(this.allowedChars,"ig")),a=0;8==e[1]&&e.length<3&&!this.phonePrefix?(e.pop(),this.phonePrefix=!0):this.phonePrefix=!1;for(var i=0;i<t.length;i++)s&&s[a]&&e&&s[a]==e[a]?a++:t[i]==this.symbol&&e&&e[a]?(t[i]=e[a],this.carerPosition=i+1,a++):t[i]==this.symbol&&e&&!e[a]&&(t=t.slice(0,i),this.carerPosition=i+1);return t}).then(e=>{this.value=e.join("")}).then(()=>{this.displayResult()}).catch(e=>{})}__mask(e){"Meta"==e.key||"Meta"==e.keyIdentifier||91==e.keyCode||1==e.metaKey||1==e.ctrlKey||e.preventDefault();var t=this.whatIsKey(e);if(!this.keysArray&&(this.keysArray=[]),-1!==["0","1","2","3","4","5","6","7","8","9","Backspace","Delete"].indexOf(t)){if("Backspace"==t||"Delete"==t){if(!this.keysArray.length)return;this.keysArray.pop()}else{var s=this.mask.match(new RegExp(this.symbol,"ig"));if(s.length>this.keysArray.length)this.keysArray.push(t);else{if(8!=this.keysArray[0]||s.length!=this.keysArray.length)return;this.keysArray.push(t)}}if(0==this.keysArray.length)this.value=this.mask,this.carerPosition=this.mask.indexOf(this.symbol);else{var a=this.mask.split(""),i=0;8==this.keysArray[0]&&(i++,this.carerPosition=4);for(var r=0;r<a.length;r++)a[r]==this.symbol&&this.keysArray[i]&&(a[r]=this.keysArray[i],this.carerPosition=r+1,i++);this.value=a.join("")}this.displayResult()}}setCaretPosition(e,t,s){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,s);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",s),a.moveStart("character",t),a.select()}}whatIsKey(e){var t=null;if(e.key)t=e.key;else if(event.keyCode)switch(""+event.keyCode){case"48":t="0";break;case"49":t="1";break;case"50":t="2";break;case"51":t="3";break;case"52":t="4";break;case"53":t="5";break;case"54":t="6";break;case"55":t="7";break;case"56":t="8";break;case"57":t="9";break;case"8":t="Backspace";break;case"46":t="Delete"}else if(event.keyIdentifier)switch(""+event.keyIdentifier){case"U+0030":t="0";break;case"U+0031":t="1";break;case"U+0032":t="2";break;case"U+0033":t="3";break;case"U+0034":t="4";break;case"U+0035":t="5";break;case"U+0036":t="6";break;case"U+0037":t="7";break;case"U+0038":t="8";break;case"U+0039":t="9";break;case"U+0008":t="Backspace"}return t}pasteWithMask(e){var t=e.clipboardData&&e.clipboardData.getData("Text");Promise.resolve().then(()=>t?(e.preventDefault(),t.match(new RegExp(this.allowedChars,"gi"))):new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e(this.element.value.match(new RegExp(this.allowedChars,"gi")))})})})).then(e=>{if(!e)throw new Error("Пусто во вставке");if(e.length>=this.maskSymbols.length)this.checkDoubleMaskSymbols(e);else for(var t=0;t<e.length;t++)this.keysArray.length<this.allowedCharsLength&&this.keysArray.push(e[t])}).then(()=>{for(var e=this.mask.split(""),t=0,s=0;s<e.length;s++)e[s]==this.symbol&&this.keysArray[t]&&(e[s]=this.keysArray[t],this.carerPosition=s+1,t++);this.value=e.join(""),this.displayResult()}).catch(e=>{console.log("Пустота",e)})}pasteWithSimpleMask(){this.__simpleMask()}displayResult(){var e=this.value&&this.value.match(new RegExp(this.allowedChars,"gi"));this.maskSymbols.length===e&&this.value!=this.lastValue&&(this.lastValue=this.value),this.element.value=this.value,this.setCaretPosition(this.element,this.carerPosition,this.carerPosition),this.element.dispatchEvent(new Event("input"))}checkKeyCodeSupport(){this.method="mask";var e=t=>{"[0-9]"==this.allowedChars&&0!==t.keyCode||229!==t.keyCode?this.method="mask":this.method="simpleMask",removeEventListener("keydown",e)};addEventListener("keydown",e)}checkDoubleMaskSymbols(e){this.keysArray=[];for(var t=0;t<this.maskSymbols.length;t++)e[t]!=this.maskSymbols[t]&&this.keysArray.length<this.allowedCharsLength&&this.keysArray.push(e[t]);for(;t<e.length&&this.keysArray.length<this.allowedCharsLength;t++)this.keysArray.push(e[t])}test(){return!new RegExp(this.symbol).test(this.value)}clear(){this.keysArray=[],this.element.value=""}}class Validation{constructor(e){this.form=e,this.setMask(e),this.formListeners(e)}formListeners(e){let t=this.setMask(e).name,s=this.setMask(e).phone,a=this.setMask(e).email,i=this.setMask(e).comment;e.addEventListener("change",t=>{this.checkAgree(e)}),e.addEventListener("submit",r=>{r.preventDefault();try{this.checkFormInputs(e,t,s,a,i)&&(this.submitForm(e),this.sendYandexMetricaReachGoal(e))}catch{console.error("Ошибка при отправке формы")}})}sendYandexMetricaReachGoal(e){if(!e.querySelector('[name="ymName"]'))return;let t=String(e.querySelector('[name="ymName"]').value);yaCounter54273208.reachGoal(t)}submitForm(e){let t=e.querySelector("form"),s=t.getAttribute("action");if(e.querySelector('[name="location"]')){let t=e.querySelector('[name="location"]');t.value=window.location.href,t.setAttribute("value",window.location.href)}fetch(s,{method:"POST",body:new FormData(t)}).then(t=>{200==t.status?(console.log("Форма отправилась"),this.sayThanks(e)):console.log("Форма не отправилась")}).catch(e=>{console.error(e)})}sayThanks(e){e.classList.add("--thanks")}openCheckEl(e,t){let s=e.querySelector(".checkNumber__number");e.classList.add("--check"),s.textContent=t}closeCheckEl(e,t){e.classList.remove("--check"),t&&t.focus()}checkFormInputs(e,t,s,a,i){let r,l,h,n,o,c=!1;return t.test()?(r=!0,t.label.classList.remove("--hasError")):(r=!1,event.preventDefault(),t.label.classList.add("--hasError")),s.test()&&this.checkPhoneNumbers(s.el)?(l=!0,s.label.classList.remove("--hasError")):(l=!1,event.preventDefault(),s.label.classList.add("--hasError")),null!=a.el?a.test()?(h=!0,a.label.classList.remove("--hasError")):(h=!1,event.preventDefault(),a.label.classList.add("--hasError")):h=!0,null!=i.el?i.test()?(n=!0,i.label.classList.remove("--hasError")):(n=!1,event.preventDefault(),i.label.classList.add("--hasError")):n=!0,this.checkAgree(e)?o=!0:(o=!1,event.preventDefault()),c=!!(r&&l&&h&&n&&o),c}checkPhoneNumbers(e){var t=!1,s=e.value.split(""),a=[];for(let e=0;e<s.length;e++){let t=+s[e];switch(t){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a.push(t)}}return a.length>12&&(t=!0),t}checkAgree(e){if(!e)return;let t=e.querySelector('[type="checkbox"]'),s=e.querySelector('[type="submit"]');return t.checked?(s.removeAttribute("disabled"),!0):(s.setAttribute("disabled","disabled"),!1)}setMask(e){if(e){var t=e.querySelector(".input--phone"),s=e.querySelector("input.--phone"),a=new Mask(s),i={el:s,label:t,test:function(){return a.test()},focus:function(){this.el.focus()},clear(){a.clear()}},r=e.querySelector(".input--name"),l={el:e.querySelector("input.--name"),label:r,test:function(){if(this.el.value.length>1){return new RegExp("^([a-zа-яё]+|d+)$","gi").test(this.el.value)}return!1},focus:function(){this.el.focus()}},h=e.querySelector(".input--email"),n={el:e.querySelector("input.--email"),label:h,test:function(){return""==this.el.value||new RegExp(".@.+?\\.\\D{2}","gi").test(this.el.value)},focus:function(){this.el.focus()}};if(e.querySelector(".input.--textarea"))var o=e.querySelector(".input.--textarea"),c={el:o.querySelector(".input__element"),label:o,test:function(){if(""==this.el.value)return!0;if(this.el.value.length>1){return!new RegExp("[<=>:/+|]","gi").test(this.el.value)}return!1},focus:function(){this.el.focus()}};return{phone:i,name:l,email:n,comment:c}}}}class Form{constructor(){this.forms=[document.querySelectorAll(".form")],this.inputs=[document.querySelectorAll(".input")],this.inputFile=[document.querySelectorAll(".js-inputFile")],this.forms.forEach(e=>{this.initValidation(e)}),this.listeners()}listeners(){this.inputFile.forEach(e=>{e.addEventListener("change",t=>{this.showFilesCount(e)})}),this.inputs.forEach(e=>{[...e.querySelectorAll(".input__element")].forEach(t=>{t.addEventListener("change",t=>{this.checkValue(e)}),t.addEventListener("input",t=>{this.checkValue(e)}),t.addEventListener("focus",t=>{this.setFocus(e)}),t.addEventListener("blur",t=>{this.removeFocus(e)})})})}initValidation(e){new Validation(e)}setFocus(e){e.classList.add("--focused")}removeFocus(e){e.classList.remove("--focused")}showFilesCount(e){let t=e.querySelector('input[type="file"]'),s=e.querySelector(".js-inputFileCount"),a=t.files,i=a.length,r="Загруженные файлы:<br> ",l=0;if(i>0){for(let e=0;e<i;e++){r+=e+1+". "+a[e].name+",<br> ",s.innerHTML=r}for(let e=0;e<i;e++)l+=a[e].size;l=l/1024/1024,l=l.toFixed(2),l>5?(s.classList.add("--error"),r="Размер файлов не должен превышать 5Мб",s.innerHTML=r,t.value=""):s.classList.remove("--error")}else s.textContent=""}checkValue(e){let t=e.getElementsByClassName("input__element")[0];""!==t.value&&void 0!==t.value&&"+7 (___) ___-__-__"!==t.value?e.classList.add("--hasValue"):e.classList.remove("--hasValue")}}class Mask{constructor(e,t={}){if(e){var s=this;this.symbol=t.symbol||"_",this.mask=t.mask||"+7 (___) ___-__-__",this.allowedChars=t.allowedChars||"[0-9]",this.empty=t.empty||"false",this.legalLength=t.legalLength,this.element=e,e.value=this.value=this.mask,this.regex=`${this.allowedChars}|${this.symbol}`,this.maskSymbols=this.mask.match(new RegExp(this.regex,"gi")),this.allowedCharsLength=0,this.maskSymbols.forEach(e=>{e==this.symbol&&this.allowedCharsLength++}),this.phonePrefix=!1,this.checkKeyCodeSupport(),e.addEventListener("focus",(function(){requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e=s.element.value.indexOf(s.symbol);s.caretPosition=-1!=e?e:s.element.value.length,s.setCaretPosition(s.element,s.caretPosition,s.caretPosition)})})})),e.addEventListener("blur",(function(){s.element.value||(s.element.value=s.mask)})),e.addEventListener("paste",e=>{"mask"==this.method&&this.pasteWithMask(e),"simpleMask"==this.method&&this.pasteWithSimpleMask(e)}),this.__bindedRoute=this.route.bind(this),e.addEventListener("load",this.__bindedRoute),e.addEventListener("keydown",this.__bindedRoute)}}route(e){0===e.keyCode||229===e.keyCode?this.__simpleMask(e):this.__mask(e)}__simpleMask(e){new Promise((e,t)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.value&&this.value.length>=this.element.value.length&&(t(),this.value=this.element.value),e(this.element.value)})})}).then(e=>e.match(new RegExp(this.allowedChars,"ig"))).then(e=>{var t=this.mask.split(""),s=this.mask.match(new RegExp(this.allowedChars,"ig")),a=0;8==e[1]&&e.length<3&&!this.phonePrefix?(e.pop(),this.phonePrefix=!0):this.phonePrefix=!1;for(var i=0;i<t.length;i++)s&&s[a]&&e&&s[a]==e[a]?a++:t[i]==this.symbol&&e&&e[a]?(t[i]=e[a],this.carerPosition=i+1,a++):t[i]==this.symbol&&e&&!e[a]&&(t=t.slice(0,i),this.carerPosition=i+1);return t}).then(e=>{this.value=e.join("")}).then(()=>{this.displayResult()}).catch(e=>{})}__mask(e){"Meta"==e.key||"Meta"==e.keyIdentifier||91==e.keyCode||1==e.metaKey||1==e.ctrlKey||e.preventDefault();var t=this.whatIsKey(e);if(!this.keysArray&&(this.keysArray=[]),-1!==["0","1","2","3","4","5","6","7","8","9","Backspace","Delete"].indexOf(t)){if("Backspace"==t||"Delete"==t){if(!this.keysArray.length)return;this.keysArray.pop()}else{var s=this.mask.match(new RegExp(this.symbol,"ig"));if(s.length>this.keysArray.length)this.keysArray.push(t);else{if(8!=this.keysArray[0]||s.length!=this.keysArray.length)return;this.keysArray.push(t)}}if(0==this.keysArray.length)this.value=this.mask,this.carerPosition=this.mask.indexOf(this.symbol);else{var a=this.mask.split(""),i=0;8==this.keysArray[0]&&(i++,this.carerPosition=4);for(var r=0;r<a.length;r++)a[r]==this.symbol&&this.keysArray[i]&&(a[r]=this.keysArray[i],this.carerPosition=r+1,i++);this.value=a.join("")}this.displayResult()}}setCaretPosition(e,t,s){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,s);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",s),a.moveStart("character",t),a.select()}}whatIsKey(e){var t=null;if(e.key)t=e.key;else if(event.keyCode)switch(""+event.keyCode){case"48":t="0";break;case"49":t="1";break;case"50":t="2";break;case"51":t="3";break;case"52":t="4";break;case"53":t="5";break;case"54":t="6";break;case"55":t="7";break;case"56":t="8";break;case"57":t="9";break;case"8":t="Backspace";break;case"46":t="Delete"}else if(event.keyIdentifier)switch(""+event.keyIdentifier){case"U+0030":t="0";break;case"U+0031":t="1";break;case"U+0032":t="2";break;case"U+0033":t="3";break;case"U+0034":t="4";break;case"U+0035":t="5";break;case"U+0036":t="6";break;case"U+0037":t="7";break;case"U+0038":t="8";break;case"U+0039":t="9";break;case"U+0008":t="Backspace"}return t}pasteWithMask(e){var t=e.clipboardData&&e.clipboardData.getData("Text");Promise.resolve().then(()=>t?(e.preventDefault(),t.match(new RegExp(this.allowedChars,"gi"))):new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e(this.element.value.match(new RegExp(this.allowedChars,"gi")))})})})).then(e=>{if(!e)throw new Error("Пусто во вставке");if(e.length>=this.maskSymbols.length)this.checkDoubleMaskSymbols(e);else for(var t=0;t<e.length;t++)this.keysArray.length<this.allowedCharsLength&&this.keysArray.push(e[t])}).then(()=>{for(var e=this.mask.split(""),t=0,s=0;s<e.length;s++)e[s]==this.symbol&&this.keysArray[t]&&(e[s]=this.keysArray[t],this.carerPosition=s+1,t++);this.value=e.join(""),this.displayResult()}).catch(e=>{console.log("Пустота",e)})}pasteWithSimpleMask(){this.__simpleMask()}displayResult(){var e=this.value&&this.value.match(new RegExp(this.allowedChars,"gi"));this.maskSymbols.length===e&&this.value!=this.lastValue&&(this.lastValue=this.value),this.element.value=this.value,this.setCaretPosition(this.element,this.carerPosition,this.carerPosition),this.element.dispatchEvent(new Event("input"))}checkKeyCodeSupport(){this.method="mask";var e=t=>{"[0-9]"==this.allowedChars&&0!==t.keyCode||229!==t.keyCode?this.method="mask":this.method="simpleMask",removeEventListener("keydown",e)};addEventListener("keydown",e)}checkDoubleMaskSymbols(e){this.keysArray=[];for(var t=0;t<this.maskSymbols.length;t++)e[t]!=this.maskSymbols[t]&&this.keysArray.length<this.allowedCharsLength&&this.keysArray.push(e[t]);for(;t<e.length&&this.keysArray.length<this.allowedCharsLength;t++)this.keysArray.push(e[t])}test(){return!new RegExp(this.symbol).test(this.value)}clear(){this.keysArray=[],this.element.value=""}}class Mask{constructor(e,t={}){if(e){var s=this;this.symbol=t.symbol||"_",this.mask=t.mask||"+7 (___) ___-__-__",this.allowedChars=t.allowedChars||"[0-9]",this.empty=t.empty||"false",this.legalLength=t.legalLength,this.element=e,e.value=this.value=this.mask,this.regex=`${this.allowedChars}|${this.symbol}`,this.maskSymbols=this.mask.match(new RegExp(this.regex,"gi")),this.allowedCharsLength=0,this.maskSymbols.forEach(e=>{e==this.symbol&&this.allowedCharsLength++}),this.phonePrefix=!1,this.checkKeyCodeSupport(),e.addEventListener("focus",(function(){requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e=s.element.value.indexOf(s.symbol);s.caretPosition=-1!=e?e:s.element.value.length,s.setCaretPosition(s.element,s.caretPosition,s.caretPosition)})})})),e.addEventListener("blur",(function(){s.element.value||(s.element.value=s.mask)})),e.addEventListener("paste",e=>{"mask"==this.method&&this.pasteWithMask(e),"simpleMask"==this.method&&this.pasteWithSimpleMask(e)}),this.__bindedRoute=this.route.bind(this),e.addEventListener("load",this.__bindedRoute),e.addEventListener("keydown",this.__bindedRoute)}}route(e){0===e.keyCode||229===e.keyCode?this.__simpleMask(e):this.__mask(e)}__simpleMask(e){new Promise((e,t)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.value&&this.value.length>=this.element.value.length&&(t(),this.value=this.element.value),e(this.element.value)})})}).then(e=>e.match(new RegExp(this.allowedChars,"ig"))).then(e=>{var t=this.mask.split(""),s=this.mask.match(new RegExp(this.allowedChars,"ig")),a=0;8==e[1]&&e.length<3&&!this.phonePrefix?(e.pop(),this.phonePrefix=!0):this.phonePrefix=!1;for(var i=0;i<t.length;i++)s&&s[a]&&e&&s[a]==e[a]?a++:t[i]==this.symbol&&e&&e[a]?(t[i]=e[a],this.carerPosition=i+1,a++):t[i]==this.symbol&&e&&!e[a]&&(t=t.slice(0,i),this.carerPosition=i+1);return t}).then(e=>{this.value=e.join("")}).then(()=>{this.displayResult()}).catch(e=>{})}__mask(e){"Meta"==e.key||"Meta"==e.keyIdentifier||91==e.keyCode||1==e.metaKey||1==e.ctrlKey||e.preventDefault();var t=this.whatIsKey(e);if(!this.keysArray&&(this.keysArray=[]),-1!==["0","1","2","3","4","5","6","7","8","9","Backspace","Delete"].indexOf(t)){if("Backspace"==t||"Delete"==t){if(!this.keysArray.length)return;this.keysArray.pop()}else{var s=this.mask.match(new RegExp(this.symbol,"ig"));if(s.length>this.keysArray.length)this.keysArray.push(t);else{if(8!=this.keysArray[0]||s.length!=this.keysArray.length)return;this.keysArray.push(t)}}if(0==this.keysArray.length)this.value=this.mask,this.carerPosition=this.mask.indexOf(this.symbol);else{var a=this.mask.split(""),i=0;8==this.keysArray[0]&&(i++,this.carerPosition=4);for(var r=0;r<a.length;r++)a[r]==this.symbol&&this.keysArray[i]&&(a[r]=this.keysArray[i],this.carerPosition=r+1,i++);this.value=a.join("")}this.displayResult()}}setCaretPosition(e,t,s){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,s);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",s),a.moveStart("character",t),a.select()}}whatIsKey(e){var t=null;if(e.key)t=e.key;else if(event.keyCode)switch(""+event.keyCode){case"48":t="0";break;case"49":t="1";break;case"50":t="2";break;case"51":t="3";break;case"52":t="4";break;case"53":t="5";break;case"54":t="6";break;case"55":t="7";break;case"56":t="8";break;case"57":t="9";break;case"8":t="Backspace";break;case"46":t="Delete"}else if(event.keyIdentifier)switch(""+event.keyIdentifier){case"U+0030":t="0";break;case"U+0031":t="1";break;case"U+0032":t="2";break;case"U+0033":t="3";break;case"U+0034":t="4";break;case"U+0035":t="5";break;case"U+0036":t="6";break;case"U+0037":t="7";break;case"U+0038":t="8";break;case"U+0039":t="9";break;case"U+0008":t="Backspace"}return t}pasteWithMask(e){var t=e.clipboardData&&e.clipboardData.getData("Text");Promise.resolve().then(()=>t?(e.preventDefault(),t.match(new RegExp(this.allowedChars,"gi"))):new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e(this.element.value.match(new RegExp(this.allowedChars,"gi")))})})})).then(e=>{if(!e)throw new Error("Пусто во вставке");if(e.length>=this.maskSymbols.length)this.checkDoubleMaskSymbols(e);else for(var t=0;t<e.length;t++)this.keysArray.length<this.allowedCharsLength&&this.keysArray.push(e[t])}).then(()=>{for(var e=this.mask.split(""),t=0,s=0;s<e.length;s++)e[s]==this.symbol&&this.keysArray[t]&&(e[s]=this.keysArray[t],this.carerPosition=s+1,t++);this.value=e.join(""),this.displayResult()}).catch(e=>{console.log("Пустота",e)})}pasteWithSimpleMask(){this.__simpleMask()}displayResult(){var e=this.value&&this.value.match(new RegExp(this.allowedChars,"gi"));this.maskSymbols.length===e&&this.value!=this.lastValue&&(this.lastValue=this.value),this.element.value=this.value,this.setCaretPosition(this.element,this.carerPosition,this.carerPosition),this.element.dispatchEvent(new Event("input"))}checkKeyCodeSupport(){this.method="mask";var e=t=>{"[0-9]"==this.allowedChars&&0!==t.keyCode||229!==t.keyCode?this.method="mask":this.method="simpleMask",removeEventListener("keydown",e)};addEventListener("keydown",e)}checkDoubleMaskSymbols(e){this.keysArray=[];for(var t=0;t<this.maskSymbols.length;t++)e[t]!=this.maskSymbols[t]&&this.keysArray.length<this.allowedCharsLength&&this.keysArray.push(e[t]);for(;t<e.length&&this.keysArray.length<this.allowedCharsLength;t++)this.keysArray.push(e[t])}test(){return!new RegExp(this.symbol).test(this.value)}clear(){this.keysArray=[],this.element.value=""}}class Validation{constructor(e){this.form=e,this.setMask(e),this.formListeners(e)}formListeners(e){let t=this.setMask(e).name,s=this.setMask(e).phone,a=this.setMask(e).email,i=this.setMask(e).comment;e.addEventListener("change",t=>{this.checkAgree(e)}),e.addEventListener("submit",r=>{r.preventDefault();try{this.checkFormInputs(e,t,s,a,i)&&(this.submitForm(e),this.sendYandexMetricaReachGoal(e))}catch{console.error("Ошибка при отправке формы")}})}sendYandexMetricaReachGoal(e){if(!e.querySelector('[name="ymName"]'))return;let t=String(e.querySelector('[name="ymName"]').value);yaCounter54273208.reachGoal(t)}submitForm(e){let t=e.querySelector("form"),s=t.getAttribute("action");if(e.querySelector('[name="location"]')){let t=e.querySelector('[name="location"]');t.value=window.location.href,t.setAttribute("value",window.location.href)}fetch(s,{method:"POST",body:new FormData(t)}).then(t=>{200==t.status?(console.log("Форма отправилась"),this.sayThanks(e)):console.log("Форма не отправилась")}).catch(e=>{console.error(e)})}sayThanks(e){e.classList.add("--thanks")}openCheckEl(e,t){let s=e.querySelector(".checkNumber__number");e.classList.add("--check"),s.textContent=t}closeCheckEl(e,t){e.classList.remove("--check"),t&&t.focus()}checkFormInputs(e,t,s,a,i){let r,l,h,n,o,c=!1;return t.test()?(r=!0,t.label.classList.remove("--hasError")):(r=!1,event.preventDefault(),t.label.classList.add("--hasError")),s.test()&&this.checkPhoneNumbers(s.el)?(l=!0,s.label.classList.remove("--hasError")):(l=!1,event.preventDefault(),s.label.classList.add("--hasError")),null!=a.el?a.test()?(h=!0,a.label.classList.remove("--hasError")):(h=!1,event.preventDefault(),a.label.classList.add("--hasError")):h=!0,null!=i.el?i.test()?(n=!0,i.label.classList.remove("--hasError")):(n=!1,event.preventDefault(),i.label.classList.add("--hasError")):n=!0,this.checkAgree(e)?o=!0:(o=!1,event.preventDefault()),c=!!(r&&l&&h&&n&&o),c}checkPhoneNumbers(e){var t=!1,s=e.value.split(""),a=[];for(let e=0;e<s.length;e++){let t=+s[e];switch(t){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a.push(t)}}return a.length>12&&(t=!0),t}checkAgree(e){if(!e)return;let t=e.querySelector('[type="checkbox"]'),s=e.querySelector('[type="submit"]');return t.checked?(s.removeAttribute("disabled"),!0):(s.setAttribute("disabled","disabled"),!1)}setMask(e){if(e){var t=e.querySelector(".input--phone"),s=e.querySelector("input.--phone"),a=new Mask(s),i={el:s,label:t,test:function(){return a.test()},focus:function(){this.el.focus()},clear(){a.clear()}},r=e.querySelector(".input--name"),l={el:e.querySelector("input.--name"),label:r,test:function(){if(this.el.value.length>1){return new RegExp("^([a-zа-яё]+|d+)$","gi").test(this.el.value)}return!1},focus:function(){this.el.focus()}},h=e.querySelector(".input--email"),n={el:e.querySelector("input.--email"),label:h,test:function(){return""==this.el.value||new RegExp(".@.+?\\.\\D{2}","gi").test(this.el.value)},focus:function(){this.el.focus()}};if(e.querySelector(".input.--textarea"))var o=e.querySelector(".input.--textarea"),c={el:o.querySelector(".input__element"),label:o,test:function(){if(""==this.el.value)return!0;if(this.el.value.length>1){return!new RegExp("[<=>:/+|]","gi").test(this.el.value)}return!1},focus:function(){this.el.focus()}};return{phone:i,name:l,email:n,comment:c}}}}